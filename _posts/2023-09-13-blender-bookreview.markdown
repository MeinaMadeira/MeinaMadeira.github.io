---
layout: post
title:  "「BlenderリアルタイムCGキャラクター制作入門」感想と詰まったところまとめ"
date:   2023-09-13 23:25:00 +0900
categories: blender
---

お久しぶりです。今回はTwitterでも話題になっていた書籍[「BlenderリアルタイムCGキャラクター制作入門」](https://www.shuwasystem.co.jp/book/9784798061955.html)を読み通した感想をまとめたいと思います。

## 感想

一通りBlenderの操作方法にも触れてくれてはいますが全くの初心者向け、ではありません。一度解説されたことはできるものとしてどんどん先へ進んでいきます。
この辺はどちらかというとある程度Blenderの操作に習熟した上で、キャラモデリングに興味がある・やってみたい層に向けられた難易度であるように思います。

その上でBlenderでのモデリング/スキニング/テクスチャリングに関しては、

- ふんだんに盛り込まれた画像と丁寧な解説
- 人型を作っていくにあたって有用な考え方やテクニックが盛りだくさん
- 参考用にそのまま使えるサンプルモデルと下絵がダウンロードできる

と大盤振る舞いの内容になっています。モデルはしぐれうい先生デザインで大変かわいいですし、これだけで元が取れると言ってもいいと思います。

一方でUnityでのセットアップ～VRChatへのアップロードについてはかなり適当であった印象があります。

- Unityでのシェーダー設定についてはどのパラメータがどんな意味を持つのかも説明せず数値を示すのみ。それも乱丁に近い抜けだらけの表で。
- 本書を買うとダウンロードできるモデルと書籍内の説明が明らかに食い違っているにも関わらず触れられていない。
- コライダーの設定もスカートのみに留まり、せっかく作ったはずの髪のボーンには触れられず「ご自身で調べて楽しんでください」とのこと。

等々、あまりの丸投げっぷりに驚きました。前段までが懇切丁寧だっただけに大変残念です。総合して買ってよかったと思える本ではありましたが、疑問点は自分で調べて解決していく姿勢が必要です。
書籍の内容だけでは、一からモデリングを始めてVRChatで遊ぶまでに持っていくのはかなり厳しいのではないかなと感じました。

## 制作中詰まったところ

以降は制作中に躓いた部分とその解決策を簡単にまとめていきます。

### 髪のUV展開
髪のモデルにテクスチャをのせたところ、書き込んだ覚えのない謎の陰影が入ってしまいました。(下図青い丸内のギザギザ部分)

<img src="/images/uv_miss.png" alt="UV展開ミス" title="UV展開ミス">

原因はUV展開を行った際に、該当部分の面が前後の髪房の面に被ってしまったことでした。これはピン止めと整列を駆使して該当箇所の面の重なりを無くすことで解決しました。

### VRChat上で白目になる
VCC上での表示では問題がなかったにも関わらず、VRChat上では白目を向いてしまうという問題が発生。

<img src="/images/white_eye.png" alt="白目" title="白目">

目の追従機能をオフにすることで一時的に回避していましたが、そのままではせっかく作ったまばたき・目の追従アニメーションが生かせません。
更に調査を続けると、瞳部分にペアレントしていたボーンが寝かせた状態(x=約90°, y=0°, z=約90°)から(x=0°, y=0°, z=0°)に戻ってしまうことで発生していた模様。
FBXファイルにエクスポートする前にボーンの回転を修正することにしました。

これを↓

<img width="50%" height="50%" src="/images/before_front.png" alt="修正前1" title="修正前1">

<img width="50%" height="50%" src="/images/before_top.png" alt="修正前2" title="修正前2"> 

こう↓

<img width="50%" height="50%" src="/images/after_front.png" alt="修正後1" title="修正後1">

<img width="50%" height="50%" src="/images/after_top.png" alt="修正後2" title="修正後2"> 

こうして無事にかわいい姿でバーチャル空間に降り立つことができるようになりました。

<img src="/images/fix_avatar.png" alt="完成" title="完成">

通しでアバターを作る経験は独力ではハードルが高かったのですごくいい経験になりました。「Blenderしばらく触ってみたし、そろそろアバター制作とかやってみようかな？」と考えている方には良いきっかけをくれる本ではないでしょうか。